# Online IDE configuration (safe to delete)

tasks:
  - before: |
      export PATH="$HOME/bin:/home/gitpod/.wasmtime/bin:$PATH"
      echo 'export PATH="$HOME/bin:$PATH"' >> ~/.bashrc
      sudo apt-get install -q -y libunwind-dev
      DFXVM_INIT_YES=1 sh -ci "$(curl -fsSL https://internetcomputer.org/install.sh)"
      source "$HOME/.local/share/dfx/env"
      dfx start --background --clean
      cargo install wasm-tools
      cargo install wac-cli
      curl https://wasmtime.dev/install.sh -sSf | bash

      # Temporary
      cd ..
      git clone https://github.com/dfinity/motoko.git
      cd motoko
      git checkout ryan/component-call
      nix-shell --run "make -C src moc && make -C rts"
      cd ../motoko-rust-starter
    command: |
      scripts/run.sh

vscode:
  extensions:
    - dfinity-foundation.vscode-motoko

ports:
  - name: Replica
    port: 4943
    visibility: public
    onOpen: ignore
  - name: Dev Server
    port: 3000
    visibility: public
    onOpen: open-browser
